(this.webpackJsonpmenu=this.webpackJsonpmenu||[]).push([[0],{136:function(e,t,n){e.exports={Top:"Top_Top__3Korq"}},137:function(e,t,n){e.exports={NavItems:"NavItems_NavItems__3VOFa"}},139:function(e,t,n){e.exports={DishForm:"DishForm_DishForm__1wcrL"}},141:function(e,t,n){e.exports=n(308)},146:function(e,t,n){},308:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(56),i=n.n(s),o=(n(146),n(20)),c=n(13),l=n(21),u=n(31),d=n.n(u),h=n(57),m=n(4),p=n(5),f=n(7),g=n(6),v=n(58),b=n(8),y="".concat(window.location.origin),E=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).logout=n.logout.bind(Object(v.a)(n)),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"logout",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth.getIdToken();case 2:return t=e.sent,e.next=5,this.props.auth.logout("/");case 5:window.location.href="".concat("https://dev-421319.okta.com/oauth2/default","/v1/logout?id_token_hint=").concat(t,"&post_logout_redirect_uri=").concat(y);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("p",{onClick:this.logout},"Logout")}}]),t}(r.Component),D=E=Object(l.withAuth)(E);function A(e){return a.a.createElement("div",null,a.a.createElement("h1",null,"Welcome ",e.username," !!!"),a.a.createElement(o.b,{to:"/user"},"User"),a.a.createElement(o.b,{to:"/admin"},"Admin"),a.a.createElement(D,null))}var k=n(135),N=n.n(k),O=(n(291),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=i.a.findDOMNode(this);this.widget=new N.a({baseUrl:this.props.baseUrl,logo:"logo.png",authParams:{pkce:!0}}),this.widget.renderEl({el:e},this.props.onSuccess,this.props.onError)}},{key:"componentWillUnmount",value:function(){this.widget.remove()}},{key:"render",value:function(){return a.a.createElement("div",null)}}]),t}(r.Component)),j=Object(l.withAuth)(function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(g.a)(t).call(this,e))).onSuccess=function(e){if("SUCCESS"===e.status)return n.props.auth.redirect({sessionToken:e.session.token})},n.onError=function(e){console.log("error logging in",e)},n.state={authenticated:null},n.checkAuthentication(),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"checkAuthentication",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.auth.isAuthenticated();case 2:(t=e.sent)!==this.state.authenticated&&this.setState({authenticated:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.checkAuthentication()}},{key:"render",value:function(){return null===this.state.authenticated?null:this.state.authenticated?a.a.createElement(c.Redirect,{to:{pathname:"/"}}):a.a.createElement(O,{baseUrl:this.props.baseUrl,onSuccess:this.onSuccess,onError:this.onError})}}]),t}(r.Component)),x=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,"Userlayout")}}]),t}(r.Component),w=function(){return a.a.createElement("div",null,a.a.createElement(x,null))},S=n(136),C=n.n(S),I=function(e){return a.a.createElement("div",{className:C.a.Top},a.a.createElement(o.b,{to:"/"},"Home"))},_=function(e){return a.a.createElement("li",{onClick:e.clicked},e.children)},F=n(137),L=n.n(F),H=function(e){var t=e.navItemList.map((function(t,n){return a.a.createElement(_,{clicked:function(){return e.clicked(n+1)},key:n+1},t)}));return t.unshift(a.a.createElement(_,{clicked:function(){return e.clicked(0)},key:0},"Add New")),a.a.createElement("ul",{className:L.a.NavItems},t)},U=n(140),q=n(59),R=n(138),T=n(27),W=n.n(T),M=n(139),B=n.n(M),J="http://localhost:3001",V=function(e){function t(){var e,n;Object(m.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={id:void 0===n.props.currentDishesArr?"":n.props.currentDishesArr._id,setName:void 0===n.props.currentDishesArr?"":n.props.currentDishesArr.setName,index:void 0===n.props.currentDishesArr?"":n.props.currentDishesArr.index,type:void 0===n.props.currentDishesArr?"":n.props.currentDishesArr.type,dishName:void 0===n.props.currentDishesArr?"":n.props.currentDishesArr.dishName,ingredient:void 0===n.props.currentDishesArr?"":n.props.currentDishesArr.ingredient},n.submitHandler=function(e){e.preventDefault();var t=Object(R.a)({},n.state);void 0===n.props.currentDishesArr?(console.log(t),n.sendAddNewFetch(t)):(console.log(t),n.sendUpdateFetch(t))},n.sendAddNewFetch=function(e){console.log("add new"),W()({method:"post",url:J+"/addnewdish",data:e}).then((function(e){console.log(e)}))},n.sendUpdateFetch=function(e){W()({method:"post",url:J+"/updatedish",data:e}).then((function(e){console.log(e)}))},n.sendDeleteFetch=function(e){W()({method:"post",url:J+"/deletedish",data:e}).then((function(e){console.log(e)}))},n.inputChangeHandler=function(e){n.setState(Object(q.a)({},e.target.name,e.target.value))},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){if(void 0!==this.props.currentDishesArr){if(e.currentDishesArr.id===this.state.id)return;this.setState({id:e.currentDishesArr.id,setName:e.currentDishesArr.setName,index:e.currentDishesArr.index,type:e.currentDishesArr.type,dishName:e.currentDishesArr.dishName,ingredient:e.currentDishesArr.ingredient})}}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:B.a.DishForm,style:{display:this.props.displayIndex?"block":"none"}},a.a.createElement("form",{onSubmit:this.submitHandler},a.a.createElement("div",{className:"form-row"},a.a.createElement("div",{className:"form-group col-md-3"},a.a.createElement("label",{htmlFor:"setName"},"Set name: "),a.a.createElement("input",{className:"form-control",onChange:this.inputChangeHandler,name:"setName",ref:"setName",type:"text",required:!0,value:this.state.setName})),a.a.createElement("div",{className:"form-group col-md-3"},a.a.createElement("label",{htmlFor:"index"},"Index: "),a.a.createElement("input",{className:"form-control",onChange:this.inputChangeHandler,name:"index",ref:"index",type:"text",required:!0,value:this.state.index})),a.a.createElement("div",{className:"form-group col-md-3"},a.a.createElement("label",{htmlFor:"type"},"Type: "),a.a.createElement("input",{className:"form-control",onChange:this.inputChangeHandler,name:"type",ref:"type",type:"text",required:!0,value:this.state.type})),a.a.createElement("div",{className:"form-group col-md-3"},a.a.createElement("label",{htmlFor:"dishName"},"Dish name: "),a.a.createElement("input",{className:"form-control",onChange:this.inputChangeHandler,name:"dishName",ref:"dishName",type:"text",required:!0,value:this.state.dishName}))),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"ingredient"},"Ingredient: "),a.a.createElement("textarea",{className:"form-control",onChange:this.inputChangeHandler,name:"ingredient",ref:"ingredient",type:"text",required:!0,value:this.state.ingredient})),a.a.createElement("input",{className:"btn btn-primary",type:"submit"})),a.a.createElement("div",{className:"btn-group ml-3"},a.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:function(){e.sendDeleteFetch(e.state)}},"Delete")))}}]),t}(r.Component),z=n(60),K=n.n(z),P=function(e){return e.children},Q=function(e){function t(){var e,n;Object(m.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={displayArr:[],toggle:n.props.displayIndex,loading:n.props.loading},n.getDishesHandler=function(e){},n.setDisplayIndexHandler=function(e){var t=Object(U.a)(n.state.displayArr);t[e]=!t[e],n.setState({displayArr:t})},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillUpdate",value:function(e){e.loading!==this.props.loading&&this.setState({loading:e.loading}),e.currentSetIndex!==this.props.currentSetIndex&&this.setState({displayArr:[]})}},{key:"render",value:function(){var e,t=this;if(0!==this.props.currentSetIndex){if(this.state.loading)return a.a.createElement("h1",{className:K.a.Loading},"Loading...");e=this.props.currentDishesArr.map((function(e,n){return a.a.createElement("div",{className:K.a.DishForms,key:n},a.a.createElement("h2",{onClick:function(){return t.setDisplayIndexHandler(n)}},e.dishName," ",t.state.displayArr[n]?"\u25bc":"\u25b2"),a.a.createElement(V,{refresh:t.props.refresh,currentDishesArr:t.props.currentDishesArr[n],displayIndex:t.state.displayArr[n]}))}))}else e=a.a.createElement("div",{className:K.a.DishForms},a.a.createElement(V,{displayIndex:!0}));return a.a.createElement(P,null,e)}}]),t}(r.Component),X=n(61),Y=n.n(X),Z=function(e){function t(){var e,n;Object(m.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={setsList:[],currentSetIndex:1,currentDishIndex:null,currentDishesArr:[],currentDishArr:[],lodaing:!1},n.navClickedHandler=function(e){n.setState({currentSetIndex:e}),console.log(e),n.getCurrentDishesArr(n.state.setsList[e-1])},n.getAllSetsHandler=function(){n.setState({loading:!0}),W()({method:"get",url:"http://localhost:3001/findallsets"}).then((function(e){var t=e.data;n.setState({setsList:t,loading:!1})}))},n.getCurrentDishesArr=function(e){n.setState({loading:!0}),W()({method:"post",url:"http://localhost:3001/findDishes",data:{setName:e}}).then((function(e){var t=e.data;n.setState({currentDishesArr:t,loading:!1})}))},n.componentDidMount=function(){n.getAllSetsHandler()},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:Y.a.AdminLayout},a.a.createElement(I,null),a.a.createElement(H,{className:Y.a.NavItems,clicked:function(t){return e.navClickedHandler(t)},navItemList:this.state.setsList}),a.a.createElement(Q,{className:Y.a.Dishforms,currentDishArr:this.state.currentDishArr,currentDishesArr:this.state.currentDishesArr,currentSetIndex:this.state.currentSetIndex,loading:this.state.loading}))}}]),t}(r.Component),$=function(){return a.a.createElement(P,null,a.a.createElement(Z,null))};function G(e){e.history.push("/login")}var ee=function(){return a.a.createElement(o.a,{basename:window.location.pathname||""},a.a.createElement(l.Security,{Security:!0,issuer:"https://dev-421319.okta.com/oauth2/default",clientId:"0oa2de4uv9SXNxF4Z4x6",redirectUri:window.location.origin+"/implicit/callback",onAuthRequired:G,pkce:!0},a.a.createElement(l.SecureRoute,{basename:"/",exact:!0,component:A}),a.a.createElement(c.Route,{basename:"/login",render:function(){return a.a.createElement(j,{baseUrl:"https://dev-421319.okta.com"})}}),a.a.createElement(c.Route,{basename:"/implicit/callback",component:l.ImplicitCallback}),a.a.createElement(c.Route,{basename:"/user",component:w}),a.a.createElement(c.Route,{basename:"/admin",component:$})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){e.exports={DishForms:"DishForms_DishForms__2QM3V",Loading:"DishForms_Loading__2yYe0"}},61:function(e,t,n){e.exports={AdminLayout:"AdminLayout_AdminLayout__1qbLz",Dishforms:"AdminLayout_Dishforms__3w3dU"}}},[[141,1,2]]]);
//# sourceMappingURL=main.c9f4b47d.chunk.js.map